version: 1.0

description: Linux capacity related commands

tasks:
  greet:
    action: test_st2.greet
    next:
      - when: <% succeeded() %>
        publish:
          - output: <% result().stdout %>
        do: clean_output

  clean_output:
    action: test_st2.clean_output
    input:
      args: <% ctx().output %>
    next:
      - when: <% succeeded() %>
        publish:
          - answer: <% result().result %>

output:
  - result: <% ctx().answer %>